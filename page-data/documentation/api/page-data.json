{"componentChunkName":"component---src-templates-documentation-template-js","path":"/documentation/api/","result":{"data":{"markdownRemark":{"html":"<p>Det tilbys to sett med API-er som hver har endel tjenester:</p>\n<ul>\n<li>Skatteetatens-API for tjenester rundt innholdet i en skattemelding.</li>\n<li>Altinn3-API for opprettelse og innsending av en skattemeldinger.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 992px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/skattemeldingen/static/2f92c08bf9e3e256bd99e4c4e33fc8a8/d7ab4/apier.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAABFUlEQVQY0zWQy07DMBRE8/+fwoYFG4SQ2PEQELUkAqJCm6RpnnXaPO0kbQ+1URdXI0vjO+eOJaXkcDiYGceR4/HIvtkRFisiEbAufNSgOJ1OTNN4nsn4tA5qICpC1sInKJYU+wxLCEFZluR5TpIkCFESJj7z6JWP6A13Y9PJ1nyuqgoNUNc1fd+b93fsYAfPzMIXwu0Kq21b9GhT0zR0bUcqYl4XjzzYdzihTa96Q6V9eqFWvbCpG7yNy/X9FbdPNyS7CEunXNI0qewlcRHxmc3wtg5f6dwQKqlMqFKKruuMagAvcXFjGyd+/yfU3V16GYbBdFhWgp/EY5ktWKaLc4eSaZwMmV6mwy+XBdkKv/g13nyX8gcZ5HgNYPotSwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"apier.png\"\n        title=\"apier.png\"\n        src=\"/skattemeldingen/static/2f92c08bf9e3e256bd99e4c4e33fc8a8/91f10/apier.png\"\n        srcset=\"/skattemeldingen/static/2f92c08bf9e3e256bd99e4c4e33fc8a8/544ba/apier.png 248w,\n/skattemeldingen/static/2f92c08bf9e3e256bd99e4c4e33fc8a8/bb630/apier.png 496w,\n/skattemeldingen/static/2f92c08bf9e3e256bd99e4c4e33fc8a8/91f10/apier.png 992w,\n/skattemeldingen/static/2f92c08bf9e3e256bd99e4c4e33fc8a8/d7ab4/apier.png 1014w\"\n        sizes=\"(max-width: 992px) 100vw, 992px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h1 id=\"skatteetatens-api\" style=\"position:relative;\"><a href=\"#skatteetatens-api\" aria-label=\"skatteetatens api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Skatteetatens-API</h1>\n<p>Skatteetaten har utviklet en testklient (i python) som viser hvordan koble seg på ID-porten og kalle skatteetatens-API:\n<a href=\"/skattemeldingen/5915fb336cfa379195e11ce501a29c6f/skattemelding-eksternt-api-test.zip\">skattemelding-eksternt-api-test.zip</a></p>\n<h2 id=\"autentisering\" style=\"position:relative;\"><a href=\"#autentisering\" aria-label=\"autentisering permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Autentisering</h2>\n<p>Når en skattepliktig skal benytte et sluttbrukersystem for å sende inn skattemeldingen og næringsopplysninger gjennom API må sluttbrukeren og/eller sluttbrukersystemet være autentisert og autorisert gjennom en påloggingsprosess.</p>\n<p>Ved kall til skattemelding-API ønsker skatteetaten å kjenne til identiteten til innsender. Identiteten til pålogget bruker, kombinert med informasjon fra Altinn autorisasjon vil avgjøre hvilken person/selskap en pålogget bruker kan hente skattemeldingen til eller sende inn skattemelding for.</p>\n<p>Autentisering skjer enten via ID-porten eller Maskinporten:</p>\n<ul>\n<li>Personlig innlogging vil skje via ID-porten.</li>\n<li>Systemer/maskiner som ønsker å opptre på vegne av en organisasjon kan autentisere seg via maskinporten.</li>\n</ul>\n<p><strong>Merk</strong> at dagens Altinn innlogging med brukernavn/passord vil ikke lenger kunne brukes.</p>\n<h3 id=\"id-porten\" style=\"position:relative;\"><a href=\"#id-porten\" aria-label=\"id porten permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ID-porten</h3>\n<p>Via ID-porten kan selve sluttbrukeren autentiseres og da via sitt personnummer.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 992px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/skattemeldingen/static/dace642aece45a49423577b2fb81550e/1790f/idporten.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.08064516129032%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABJ0AAASdAHeZh94AAABbElEQVQoz21S20+CUBzmj++lWm+taVpbtTZdLcsu85JpamXLradYeYmpiMa8IXo4IPB1zjFsa73wg/Pju4I0mZgYDQ3YtgNKLViWBd/3wS7LCYgZ3P999j0P5tTAQNcZB4VUq3WgaUMQQqGqHTTqDSwc5xfMAP8Reey811VRrTygdJfF68szRoMBpPnMhOvYWCwWkGUZOlPiLjlA7/dQzN+iWf+Ay/b8jLJdp6UgnUwgfhBFInaMciGHp2JeCEjbG2s4iuwIVUVRBDGlVLh8l9+wubWOAgMErgmZo5jLIMUI01cXYpaZaFv5xMycQkolz4SCw4h2w2HsRaNsYQqwMRmjdJ+D0qyvYnOH1cojstdJZBjhzfkp+sxZUIUUvEgIQSgUQiQSWX4Y0RnvMOhsOXnxnCx+uI/Lk5ggoxZZVSLxKDaL6LruyoXnuRiPDLRbPXRVHVpXx1d/KGJzoGPbAqNrGqYsBZnPYP/8Hd9engTHITkjLAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"idporten.png\"\n        title=\"idporten.png\"\n        src=\"/skattemeldingen/static/dace642aece45a49423577b2fb81550e/91f10/idporten.png\"\n        srcset=\"/skattemeldingen/static/dace642aece45a49423577b2fb81550e/544ba/idporten.png 248w,\n/skattemeldingen/static/dace642aece45a49423577b2fb81550e/bb630/idporten.png 496w,\n/skattemeldingen/static/dace642aece45a49423577b2fb81550e/91f10/idporten.png 992w,\n/skattemeldingen/static/dace642aece45a49423577b2fb81550e/1790f/idporten.png 1189w\"\n        sizes=\"(max-width: 992px) 100vw, 992px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h4 id=\"registrering-av-et-sluttbrukersystem-i-id-porten\" style=\"position:relative;\"><a href=\"#registrering-av-et-sluttbrukersystem-i-id-porten\" aria-label=\"registrering av et sluttbrukersystem i id porten permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Registrering av et sluttbrukersystem i ID-porten</h4>\n<p>Når et sluttbrukersystem initierer en påloggingsprosess mot ID-porten må SBS sende med en klient-ID. Denne klient-id-en er unik for SBS-typen og vil bli tildelt ved at programvareleverandøren av SBS på forhånd har gjennomført en registrering (onboarding) i en selvbetjeningsportal hos Digdir/Difi. Dette er beskrevet her: <a href=\"https://difi.github.io/felleslosninger/oidc_index.html\">https://difi.github.io/felleslosninger/oidc_index.html</a>. Lenken beskriver også standarden OIDC som ID-porten er basert på.</p>\n<p>I registreringen inngår følgende data:</p>\n<ul>\n<li>Klient-id. Denne er en GUID som tildeles fra Digdir/Difi.</li>\n<li>Klient-navn. Dette er navn på SBS-systemet. Denne settes av SBS-leverandøren og det er ingen videre krav til navnestandard eller om programvareversjon skal inngå i navnet.</li>\n<li>Klient-navn skal presenteres for brukeren under påloggingen.</li>\n<li>Hvilken offentlig API-tjeneste registreringen gjelder. Dette identifiseres ved navn på en autorisasjonstype som er definert i ID-porten. For skattemeldingen foreslår vi autorisasjonstypenavnet \"Skattemeldingen-API\". merk! Dette støttes ikke i dag, men vil komme senere.</li>\n<li>Registreringen må knyttes opp mot en juridisk ansvarlig aktør, dvs et norsk selskap identifisert ved et orgnr.</li>\n</ul>\n<h3 id=\"maskin-porten\" style=\"position:relative;\"><a href=\"#maskin-porten\" aria-label=\"maskin porten permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Maskin-porten</h3>\n<p>Maskinporten sørger for sikker autentisering og tilgangskontroll for datautveksling mellom virksomheter. Løsningen garanterer identiteten mellom virksomheter og gjør det mulig å binde sammen systemer.</p>\n<p>Et sluttbrukersystem som kjører på en sikker server kan integreres i Maskinporten og da være autentisert med sitt organisasjonsnummer. Det vil da være organisasjonen som autentiserer seg. Hvilken sluttbruker som utfører hvilken handling i deres system må organisasjonen selv holde kontroll på. En forutsetning for bruk av Maskinporten er derfor at organisasjonen har bygget et godt tilgangskontroll av sine sluttbrukere.</p>\n<p>En autentisering gjort via Maskinporten tilrettelegger for høyere grad av automatisering da det ikke krever en personlig kodebrikke eller liknende. Vi tror Maskinporten vil passe for store selskap og regnskapsførere som skal levere skattemeldingen for mange.</p>\n<p>Bruk av Maskinporten forutsetter at organisasjonen har et virksomhetssertifikat eller tilsvarende mekanisme. Figuren under skisserer hvordan samhandlingen fungerer:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/skattemeldingen/static/4971d74fc93c737b59daa5821ded19a7/5a190/maskinporten.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.516129032258064%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABUUlEQVQoz3VSW0rDQBTNvlyNixBcgSvQX/FXwR/B+iFa0CJafIEKtkhs05CmzcNM0rwmuXOcmVTaYjtwZ7iPc+bMvWMQCQQ/MbyQoa4JQoh/plazY2N+KvF5UcJQTlFyhDJA4g82p9C+AFENqhubs67UKS8MIsySDIbK9T6+cHfVgdkfoJaKs4LLSyrwSiDNS7gTH67nw3Gn2ldxlc9lHUky2xqj3Wrj5f4Jhnpmt/OIs+MLvD+/oeCVBkUshmVZ4JxrHXlS6JaQIHiehzTNNCGXsdFghPPTS3Rvu0qhAIsSjB0fMZvpnlSyiCUpbGfSKOi72N8+ROvgWiorYX4PdV6pVJeUkphFKeI4awiXl5j3bXkSvQcTu1t7ONo5keBKt2UBW8VrQjVpojUTpqZYDe315hO2Odk4aaLmNNYlF99B6CfZTgjLDTCUbWFxvpFU2S8c+mdcquMeYAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"maskinporten.png\"\n        title=\"maskinporten.png\"\n        src=\"/skattemeldingen/static/4971d74fc93c737b59daa5821ded19a7/5a190/maskinporten.png\"\n        srcset=\"/skattemeldingen/static/4971d74fc93c737b59daa5821ded19a7/544ba/maskinporten.png 248w,\n/skattemeldingen/static/4971d74fc93c737b59daa5821ded19a7/bb630/maskinporten.png 496w,\n/skattemeldingen/static/4971d74fc93c737b59daa5821ded19a7/5a190/maskinporten.png 800w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Les detaljer om maksinporten her: <a href=\"https://difi.github.io/felleslosninger/maskinporten_guide_apikonsument.html\">https://difi.github.io/felleslosninger/maskinporten_guide_apikonsument.html</a></p>\n<h2 id=\"autorisasjon\" style=\"position:relative;\"><a href=\"#autorisasjon\" aria-label=\"autorisasjon permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Autorisasjon</h2>\n<p>API-ene som tilbys vil sjekke at sluttbrukeren eller eier av sluttbrukersystemet har tilgang til å utføre operasjoner gjennom API-et. Slik tilgangskontroll/autorisering skjer via Altinns autorisasjonskomponent.</p>\n<p>Dette betyr at sluttbrukeren eller eier av sluttbrukersystemet må ha de nødvendige rollene i Altinn. Dette blir som i eksisterende løsninger.</p>\n<h2 id=\"ping-tjeneste\" style=\"position:relative;\"><a href=\"#ping-tjeneste\" aria-label=\"ping tjeneste permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ping tjeneste</h2>\n<p>API tilbyr en ping tjeneste som kan kalles for å teste at integrasjonen fungerer.</p>\n<p><strong>URL</strong> : <code class=\"language-text\">GET https://&lt;env&gt;/api/eksterntapi/formueinntekt/skattemelding/ping</code></p>\n<p><strong>Eksempel URL</strong> : <code class=\"language-text\">GET https://mp-test.sits.no/api/eksterntapi/formueinntekt/skattemelding/ping</code></p>\n<p><strong>Forespørsel</strong> : <code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse</code></p>\n<p><strong>Respons</strong> :</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token property\">\"ping\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pong\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>For detaljer om ping-tjenesten og \"hent Skattemelding\" tjenestene, se filen hent.py <a href=\"/skattemeldingen/5915fb336cfa379195e11ce501a29c6f/skattemelding-eksternt-api-test.zip\">skattemelding-eksternt-api-test.zip</a></p>\n<h2 id=\"hent-skattemelding\" style=\"position:relative;\"><a href=\"#hent-skattemelding\" aria-label=\"hent skattemelding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hent skattemelding</h2>\n<p>API som returnerer siste gjeldende skattemeldingen for skattepliktige for gitt inntektsår. Den siste gjeldende skattemeldingen kan enten være utkast eller fastsatt:</p>\n<ul>\n<li>Utkast er en preutfylt skattemelding Skatteetaten har laget for den skattepliktige basert på innrapporterte data og data fra skattemeldingen tidligere år.</li>\n<li>Fastsatt betyr at skattemeldingen er manuelt innlevert eller automatisk innlevert ved utløp av innleveringsfrist. Dette kan også inneholde et eller flere myndighetsfastsatte felter.</li>\n</ul>\n<p><strong>URL</strong> : <code class=\"language-text\">GET https://&lt;env&gt;/api/eksterntapi/formueinntekt/skattemelding/&lt;inntektsaar&gt;/&lt;identifikator&gt;/</code></p>\n<p><strong>Eksempel URL</strong> : <code class=\"language-text\">GET https://mp-test.sits.no/api/eksterntapi/formueinntekt/skattemelding/2020/974761076</code></p>\n<p><strong>Forespørsel</strong> :</p>\n<ul>\n<li><code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse</code></li>\n<li><code class=\"language-text\">&lt;inntektsår&gt;: Inntektsåret man spør om informasjon for, i formatet YYYY.</code></li>\n<li><code class=\"language-text\">&lt;identifikator&gt;: Fødselsnummer, D-nummer eller organisasjonsnummer til den skattepliktige som man spør om skattemeldingen for.</code></li>\n</ul>\n<p><strong>Respons</strong> :</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hentSkattemeldingMvResponse</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>no:skatteetaten:fastsetting:formueinntekt:skattemelding:hentskattemeldingmv:response:v1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokumenter</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>skattemeldingdokument</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>id</span><span class=\"token punctuation\">></span></span>SKI:138:5829<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>id</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoding</span><span class=\"token punctuation\">></span></span>utf-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoding</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>content</span><span class=\"token punctuation\">></span></span>Base64-enkodet skattemelding.xml iht XSD<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>content</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>type</span><span class=\"token punctuation\">></span></span>skattemeldingUtkastPersonligSkattepliktig<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>type</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>skattemeldingdokument</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokumenter</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>hentSkattemeldingMvResponse</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2 id=\"hent-skattemelding-basert-på-type\" style=\"position:relative;\"><a href=\"#hent-skattemelding-basert-p%C3%A5-type\" aria-label=\"hent skattemelding basert på type permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hent Skattemelding (basert på type)</h2>\n<p>API som returnerer siste gjeldende skattemeldingen av gitt type for skattepliktige for gitt inntektsår. Følgende type skattemeldinger er støttet:</p>\n<ul>\n<li>Utkast er en preutfylt skattemelding Skatteetaten har laget for den skattepliktige basert på innrapporterte data og data fra skattemeldingen tidligere år.</li>\n<li>Fastsatt betyr at skattemeldingen er manuelt innlevert eller automatisk innlevert ved utløp av innleveringsfrist. Dette kan også inneholde et eller flere myndighetsfastsatte felter.</li>\n</ul>\n<p><strong>URL</strong> : <code class=\"language-text\">GET https://&lt;env&gt;/api/eksterntapi/formueinntekt/skattemelding/&lt;type&gt;/&lt;inntektsaar&gt;/&lt;identifikator&gt;/</code></p>\n<p><strong>Eksempel URL</strong> : <code class=\"language-text\">GET https://mp-test.sits.no/api/eksterntapi/formueinntekt/skattemelding/utkast/2020/974761076</code></p>\n<p><strong>Forespørsel</strong> :</p>\n<ul>\n<li><code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse</code></li>\n<li><code class=\"language-text\">&lt;inntektsår&gt;: Inntektsåret man spør om informasjon for, i formatet YYYY.</code></li>\n<li><code class=\"language-text\">&lt;identifikator&gt;: Fødselsnummer, D-nummer eller organisasjonsnummer til den skattepliktige som man spør om skattemeldingen for.</code></li>\n</ul>\n<p><strong>Respons</strong> :</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hentSkattemeldingMvResponse</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>no:skatteetaten:fastsetting:formueinntekt:skattemelding:hentskattemeldingmv:response:v1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokumenter</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>skattemeldingdokument</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>id</span><span class=\"token punctuation\">></span></span>SKI:138:5829<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>id</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoding</span><span class=\"token punctuation\">></span></span>utf-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoding</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>content</span><span class=\"token punctuation\">></span></span>Base64-enkodet skattemelding.xml iht XSD<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>content</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>type</span><span class=\"token punctuation\">></span></span>skattemeldingUtkastPersonligSkattepliktig<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>type</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>skattemeldingdokument</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokumenter</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>hentSkattemeldingMvResponse</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2 id=\"valider-skattemelding\" style=\"position:relative;\"><a href=\"#valider-skattemelding\" aria-label=\"valider skattemelding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Valider skattemelding</h2>\n<p>Tjenesten validerer innholdet i en skattemelding og returnerer en respons med eventuelle feil, avvik og advarsler. Tjenesten vil foreta følgende:</p>\n<ol>\n<li>Kontroll av meldingsformatet.</li>\n<li>Kontroll av innholdet og sammensetningen av elementene i skattemeldingen.</li>\n<li>Beregninger/kalkyler.</li>\n</ol>\n<p>Skatteetaten ønsker at valideringstjenesten blir kalt i forkant av innsending av skattemeldingen. Dette for å sikre at skattemeldingen er korrekt og vil mest sannsynligvis bli godkjent ved innsending.\nUansett versjon vil skatteetaten ikke lagre eller følge opp informasjonen som sendes inn i valideringstjenesten på noen måte. Skatteetaten anser at disse dataene eies av den skattepliktige og ikke av skatteetaten.</p>\n<p><strong>URL</strong> : <code class=\"language-text\">POST https://&lt;env&gt;/api/eksterntapi/formueinntekt/skattemelding/valider/&lt;inntektsaar&gt;/&lt;identifikator&gt;</code></p>\n<p><strong>Eksempel URL</strong> : <code class=\"language-text\">POST https://mp-test.sits.no/api/eksterntapi/formueinntekt/skattemelding/valider/2020/01028312345</code></p>\n<p><strong>Forespørsel</strong> :</p>\n<ul>\n<li><code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse</code></li>\n<li><code class=\"language-text\">&lt;inntektsår&gt;: Inntektsåret man spør om informasjon for, i formatet YYYY.</code></li>\n<li><code class=\"language-text\">&lt;identifikator&gt;: Fødselsnummer, D-nummer eller organisasjonsnummer til den skattepliktige</code></li>\n</ul>\n<p><strong>Body</strong> :</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>valideringsrequest</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>no:skatteetaten:fastsetting:formueinntekt:skattemelding:valideringsrequest:v1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokumenter</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokument</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>type</span><span class=\"token punctuation\">></span></span>skattemeldingPersonligSkattepliktig<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>type</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoding</span><span class=\"token punctuation\">></span></span>utf-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoding</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>content</span><span class=\"token punctuation\">></span></span>Base64-enkodet skattemelding.xml iht xsd-en<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>content</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokument</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokumenter</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>valideringsrequest</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><strong>Respons</strong> :</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>valideringsresponse</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>no:skatteetaten:fastsetting:formueinntekt:skattemelding:validering:response:v1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokumenter</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokument</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>type</span><span class=\"token punctuation\">></span></span>skattemeldingEtterBeregning<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>type</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoding</span><span class=\"token punctuation\">></span></span>utf-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoding</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>content</span><span class=\"token punctuation\">></span></span>Base64-enkodet xml<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>content</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokument</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokument</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>type</span><span class=\"token punctuation\">></span></span>naeringsopplysningerEtterBeregning<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>type</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoding</span><span class=\"token punctuation\">></span></span>utf-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoding</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>content</span><span class=\"token punctuation\">></span></span>Base64-enkodet xml<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>content</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokument</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokument</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>type</span><span class=\"token punctuation\">></span></span>beregnetSkatt<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>type</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoding</span><span class=\"token punctuation\">></span></span>utf-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoding</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>content</span><span class=\"token punctuation\">></span></span>Base64-enkodet xml<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>content</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokument</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokument</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>type</span><span class=\"token punctuation\">></span></span>summertSkattegrunnlagForVisning<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>type</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoding</span><span class=\"token punctuation\">></span></span>utf-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoding</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>content</span><span class=\"token punctuation\">></span></span>Base64-enkodet xml<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>content</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokument</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokumenter</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>avvikEtterBeregning</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>avvik</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>avvikstype</span><span class=\"token punctuation\">></span></span>manglerNaeringsopplysninger<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>avvikstype</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>forekomstidentifikator</span><span class=\"token punctuation\">></span></span>global<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>forekomstidentifikator</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beregnetVerdi</span><span class=\"token punctuation\">></span></span>0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beregnetVerdi</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>sti</span><span class=\"token punctuation\">></span></span>resultatregnskap/driftsinntekt/sumDriftsinntekt/beloep/beloepSomHeltall<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>sti</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>avvik</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>avvikEtterBeregning</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>valideringsresponse</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>For detaljer om valider-tjenesten, se filen valider.py <a href=\"/skattemeldingen/5915fb336cfa379195e11ce501a29c6f/skattemelding-eksternt-api-test.zip\">skattemelding-eksternt-api-test.zip</a></p>\n<h1 id=\"altinn3-api\" style=\"position:relative;\"><a href=\"#altinn3-api\" aria-label=\"altinn3 api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Altinn3-API</h1>\n<p>For applikasjonsbrukere, dvs. organisasjoner og personer som kaller Altinn gjennom et klient API (typisk skattepliktige som bruker et sluttbrukersystem) tilbyr Altinn API-er med følgende funksjonalitet:</p>\n<ul>\n<li>Opprette en instans - i vårt tilfelle vil en instans være en skattemelding for et gitt år.</li>\n<li>Laste opp data - Brukes til å laste opp skattedata til en instans i Altinn. Relevante filer å laste opp vil være metadata og selve skattemeldingen.</li>\n<li>Laste ned data - Brukes til å laste ned data som tidligere er blitt lastet opp.</li>\n<li>Hente og trigge prosesstilstandendring.</li>\n<li>Hente eventer skjedd på en instans.</li>\n</ul>\n<p>Les mer om Altinn API-ene på <a href=\"https://docs.altinn.studio/teknologi/altinnstudio/altinn-api/\">altinn sine sider</a>. Altinn har utviklet POSTMAN skript som viser hvordan deres APIer kan bli kalt. Postman skriptene <a href=\"https://github.com/Altinn/altinn-studio/blob/master/src/test/Postman/collections/App.postman_collection.json\">finnes her</a></p>\n<p>Skatteetaten har også laget POSTMAN-skript som gjør kallene beskrevet under, se: <a href=\"/skattemeldingen/3db6572b2c193116e1b0388f532a6137/Skattemelding%20-%20Innsending%20-%20Altinn3.postman_collection.json\">postman_collection.json</a></p>\n<p>Tjenestene listet under kalles for å sende inn skattemelding til Altinn. Under følger en nærmere beskrivelse av hvordan skatteetatens innsendingstjenste vil fungere.</p>\n<p><em>Merk at Base URL-en</em> til applikasjonen vår i Altinn er: <code class=\"language-text\">https://skd.apps.tt02.altinn.no/skd/sirius-skattemelding-v1/.</code></p>\n<h2 id=\"autentisering-1\" style=\"position:relative;\"><a href=\"#autentisering-1\" aria-label=\"autentisering 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Autentisering</h2>\n<p>Første trinn er å få generert et autentiseringstoken i Altinn. Autentisering skjer enten via maskinporten eller ID-porten. Les mer om det på <a href=\"https://docs.altinn.studio/teknologi/altinnstudio/altinn-api/authentication/\">altinn sine sider</a></p>\n<p>Tokenet fra maskinporten/ID-porten brukes til å veksle det inn i et Altinn JWT access token. Det er Altinn tokenet som brukes videre til å kalle Altinn-APIer beskervet under.</p>\n<h2 id=\"hent-partyid\" style=\"position:relative;\"><a href=\"#hent-partyid\" aria-label=\"hent partyid permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hent partyID</h2>\n<p>PartyID er et intern Id hos Altinn som brukes til å kalle de øvrige tjenestene.</p>\n<p><strong>URL</strong> : <code class=\"language-text\">GET https://&lt;env&gt;/api/v1/profile/user</code></p>\n<p><strong>Eksempel URL</strong> : <code class=\"language-text\">GET https://skd.apps.tt02.altinn.no/skd/sirius-skattemelding-v1/api/v1/profile/user</code></p>\n<p><strong>Forespørsel</strong> :</p>\n<ul>\n<li><code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse på format: https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}.</code></li>\n<li><code class=\"language-text\">En header kalt Authorization må inneholde Altinn token (ref. avsnittet autentisering).</code></li>\n</ul>\n<p><strong>Respons</strong> : PartyId</p>\n<h2 id=\"opprette-instans\" style=\"position:relative;\"><a href=\"#opprette-instans\" aria-label=\"opprette instans permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Opprette instans</h2>\n<p>Første trinn i innsendingsløpet er opprettelse av en instans av skattemeldingen. Dette gjøres ved å kalle:</p>\n<p><strong>URL</strong> : <code class=\"language-text\">POST https://&lt;env&gt;/instances</code></p>\n<p><strong>Eksempel URL</strong> : <code class=\"language-text\">https://skd.apps.tt02.altinn.no/skd/sirius-skattemelding-v1/instances/</code></p>\n<p><strong>Forespørsel</strong> :</p>\n<ul>\n<li><code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse på format: https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}.</code></li>\n<li><code class=\"language-text\">En header kalt Authorization må inneholde Altinn token (ref. avsnittet autentisering).</code></li>\n</ul>\n<p><strong>Body</strong> :</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\">{\n    \"instanceOwner\": {\n        \"partyId\": \"50006841\"\n    },\n    \"appOwner\":{\n        \"labels\" : [ \"gr\", \"x2\" ]\n    },\n    \"appId\" : \"skd/sirius-skattemelding-v1\",\n    \"dueBefore\": \"2020-06-01T12:00:00Z\",\n    \"visibleAfter\": \"2019-05-20T00:00:00Z\",\n    \"title\": { \"nb\": \"Skattemelding\" }\n}</code></pre></div>\n<p><strong>Respons</strong> : Metadata om instansen som ble opprettet. En unik instanceId vil være med i responen og kan brukes seinere til å hente/oppdatere instansen.</p>\n<h2 id=\"laste-opp-metadata\" style=\"position:relative;\"><a href=\"#laste-opp-metadata\" aria-label=\"laste opp metadata permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Laste opp metadata</h2>\n<p>Neste trinn er å laste opp meta-data (informasjon om hvem innsender er, dato etc.) om skattemeldingen. Meta-data skal være en XML-fil iht. Skattemeldingsapp<em>v1.xsd (se også eksempelfilen: Skattemeldingsapp</em>v1.xml).</p>\n<p><strong>URL</strong> : <code class=\"language-text\">POST https://&lt;env&gt;/instances</code>\n<strong>Eksempel URL</strong> : <code class=\"language-text\">https://skd.apps.tt02.altinn.no/skd/sirius-skattemelding-v1/instances/50006841/55e65419-361f-4da5-9ad2-dce08ba6a0e1/data?dataType=Skattemeldingsapp_v1</code></p>\n<p><strong>Forespørsel</strong> :</p>\n<ul>\n<li><code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse på format: https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}.</code></li>\n<li><code class=\"language-text\">En header kalt Authorization må inneholde Altinn token (ref. avsnittet autentisering).</code></li>\n</ul>\n<h2 id=\"laste-opp-skattedata\" style=\"position:relative;\"><a href=\"#laste-opp-skattedata\" aria-label=\"laste opp skattedata permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Laste opp skattedata</h2>\n<p>Neste trinn er å laste opp vedlegg.</p>\n<p><strong>URL</strong> : <code class=\"language-text\">POST {appPath}/instances/{partyId}/{instanceId}/data?dataType={type}</code></p>\n<p><strong>Eksempel URL</strong> : <code class=\"language-text\">https://skd.apps.tt02.altinn.no/skd/sirius-skattemelding-v1/instances/50006841/ef796f7b-8168-4373-bcc6-cf6c42a8873e/data?dataType=skattemelding</code></p>\n<p><strong>Forespørsel</strong> :</p>\n<ul>\n<li><code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse på format: https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}.</code></li>\n<li><code class=\"language-text\">En header kalt Authorization må inneholde Altinn token (ref. avsnittet autentisering).</code></li>\n</ul>\n<p><strong>Body</strong> : <code class=\"language-text\">data-binary &#39;../skattemelding.xml&#39;. Filen skattemelding.xml skal være på samme format som responsen fra tjenesten &quot;Hent Skattemelding&quot;.</code></p>\n<p><strong>Respons</strong> : <code class=\"language-text\">Respons vil inneholde metadata om objektet som ble opprettet. En unik identifikator (id) vil bli retunert som seinere kan brukes til å oppdatere, sjekke status etc..</code></p>\n<h2 id=\"trigge-prosesstilstandsendring\" style=\"position:relative;\"><a href=\"#trigge-prosesstilstandsendring\" aria-label=\"trigge prosesstilstandsendring permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Trigge prosesstilstandsendring</h2>\n<p>For å endre prosesstilstanden kan følgende API kalles:</p>\n<p><strong>URL</strong> : <code class=\"language-text\">GET {appPath}/instances/{instanceOwnerId}/{instanceId}/prosess/start|next|completeProcess</code></p>\n<p><strong>Eksempel URL</strong> : <code class=\"language-text\">https://skd.apps.tt02.altinn.no/skd/sirius-skattemelding-v1/instances/50006841/ef796f7b-8168-4373-bcc6-cf6c42a8873e/process/completeProcess</code></p>\n<p><strong>Forespørsel</strong> :</p>\n<ul>\n<li><code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse på format: https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}.</code></li>\n<li><code class=\"language-text\">En header kalt Authorization må inneholde Altinn token (ref. avsnittet autentisering).</code></li>\n</ul>","headings":[{"value":"Skatteetatens-API","depth":1},{"value":"Autentisering","depth":2},{"value":"ID-porten","depth":3},{"value":"Registrering av et sluttbrukersystem i ID-porten","depth":4},{"value":"Maskin-porten","depth":3},{"value":"Autorisasjon","depth":2},{"value":"Ping tjeneste","depth":2},{"value":"Hent skattemelding","depth":2},{"value":"Hent Skattemelding (basert på type)","depth":2},{"value":"Valider skattemelding","depth":2},{"value":"Altinn3-API","depth":1},{"value":"Autentisering","depth":2},{"value":"Hent partyID","depth":2},{"value":"Opprette instans","depth":2},{"value":"Laste opp metadata","depth":2},{"value":"Laste opp skattedata","depth":2},{"value":"Trigge prosesstilstandsendring","depth":2}],"fields":{"slug":"/documentation/api/"},"frontmatter":{"title":"API"}}},"pageContext":{"slug":"/documentation/api/"}},"staticQueryHashes":["270254161"]}