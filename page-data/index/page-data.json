{"componentChunkName":"component---src-pages-index-js","path":"/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1 id=\"implementasjonsguide-for-innrapportering-av-skattemeldingen-for-næringsdrivende\" style=\"position:relative;\"><a href=\"#implementasjonsguide-for-innrapportering-av-skattemeldingen-for-n%C3%A6ringsdrivende\" aria-label=\"implementasjonsguide for innrapportering av skattemeldingen for næringsdrivende permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Implementasjonsguide for innrapportering av skattemeldingen for næringsdrivende</h1>\n<h2 id=\"bakgrunn-og-behov\" style=\"position:relative;\"><a href=\"#bakgrunn-og-behov\" aria-label=\"bakgrunn og behov permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bakgrunn og behov</h2>\n<p>SIRIUS-prosjektet utvikler ny skattemelding for personlige og upersonlige skattepliktige. Målet er å heve kvalitet på innleverte opplysninger, gjøre det enklere å levere riktige opplysninger og effektivisere Skatteetatens behandling av skattemeldingen.</p>\n<p>Utvikling av ny skattemelding foregår iterativt og innføres trinnvis. Først ut er ny skattemelding for lønnstakere og pensjonister. Denne innføres i perioden 2019-2021. </p>\n<p>Systeminnsending av ny skattemelding for personlige skattepliktige (lønnstakere og pensjonister/personlige næringsdrivende) innføres fra 2021. I 2021 vil den dekke alle personlige forhold og utvalgte næringsforhold som skal testes ut i en pilot.  Deretter vil vi innføre ny skattemelding for alle næringsforhold og upersonlig skattepliktige (selskap mv).</p>\n<p>I forbindelse med en forskriftsendring vil det bli innført et pålegg om at næringsdrivende som hovedregel skal levere sin skattemelding på et bestemt digitalt format. Dette innebærer at flere næringsdrivende enn i dag må levere sin skattemelding fra et årsoppgjørsprogram eller regnskapssystem.  Unntaket vil være næringsdrivende med enkle forhold (avgrensning ikke besluttet). Disse skal tilbys en portal for utfylling. </p>\n<h2 id=\"overordnet-løsningsoversikt---komponenter-api-og-meldinger\" style=\"position:relative;\"><a href=\"#overordnet-l%C3%B8sningsoversikt---komponenter-api-og-meldinger\" aria-label=\"overordnet løsningsoversikt   komponenter api og meldinger permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Overordnet løsningsoversikt - komponenter, API og meldinger</h2>\n<p>Her beskrives arkitekturen i den nye løsningen. Figuren under viser en oversikt over aktører og komponenter.</p>\n<p><img src=\"/skattemeldingen/adb6b383a5f1e9d39f65ecc503dec4c3/oversikt2.png\" alt=\"oversikt.png\"></p>\n<ul>\n<li>Et SBS oppretter skattemeldinger og næringsopplysninger gjennom et brukergrensesnitt mot sluttbrukere.</li>\n<li>SBS kan utføre operasjoner på skattemeldingene gjennom et API mot Altinn3. Disse API-en blir nye og er ikke de samme som benyttes i dag for Altinn2-innsending.</li>\n<li>Det tilbys API for å hente skattedata, validere skattemeldingen og næringsopplysninger, signere og sende inn.</li>\n<li>Skattemeldingen og næringsopplysninger vil være XML-filer og disse vil sendes som binære vedleggsfiler i API-ene. XML-filene vil ikke bli bundet til Altinn-skjema som i dag, men være ihht. nye XSD-er for skattemelding og næringsopplysninger. Skatteetaten spesifiser innholdet i XML-filene gjennom XSD-spesifikasjoner.  </li>\n<li>Eksisterende funksjonalitet i Altinn2 for Innboks og roller og rettigheter vil videreføres i den nye løsningen.</li>\n<li>Skattepliktig og ev revisor kan gå i Altinn for å se på innsendte data og signere og sende inn til Skatteetaten (dette punktet gjelder ikke for pilot)</li>\n<li>Skatteetaten vil tilby portalløsning som gir personlige skattepliktige mulighet til innsyn og ev endring med påfølgende  innsending av skattemeldingen.</li>\n<li>Pålogging, autentisering av sluttbrukeren og/eller sluttbrukersystemet skal gjøres via ID-porten og/eller Maskinporten.</li>\n</ul>\n<h2 id=\"funksjonell-spesifikasjon\" style=\"position:relative;\"><a href=\"#funksjonell-spesifikasjon\" aria-label=\"funksjonell spesifikasjon permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Funksjonell spesifikasjon</h2>\n<p>Sirius sin nye løsning for skattemelding for næringsdrivende vil støtte oppunder de samme lover og krav til næringsdrivende som dagens løsning.</p>\n<p>Løsningen legger opp til at en innsending skal ha skattemelding og næringsopplysninger. For piloten er det de personlige skattepliktige med næring (ENK) som det utvikles støtte for.\nDet stiplede rektangel identifiserer hva som ansees som en enhet med informasjon som skal sendes inn til Skatteetaten sine tjenester for validering og innsending.</p>\n<p><img src=\"/skattemeldingen/9877182d468b2a10b7a02abe91bacbe6/typeSelskap.png\" alt=\"typeSelskap.png\">\nSom i dagens løsning vil det være mulig å hente ned den informasjonene som Skatteeetaten vet om den skattepliktige og bruke dette som grunnlag for utfyllingen av skattemeldingen.\nEtter pilot vil det også bli utviklet muligheter til å hente ned den informasjonen som Skatteetaten vet om den næringsdrivende og som kan brukes som utgangspunkt for å fylle ut næringsopplysningene.</p>","fields":{"slug":"/frontpage/"}}},{"node":{"html":"<p>Det tilbys to sett med API-er som hver har endel tjenester:</p>\n<ul>\n<li>Skatteetatens-API for tjenester rundt innholdet i en skattemelding. </li>\n<li>Altinn3-API for opprettelse og innsending av en skattemeldinger. </li>\n</ul>\n<p><img src=\"/skattemeldingen/2f92c08bf9e3e256bd99e4c4e33fc8a8/apier.png\" alt=\"apier.png\"></p>\n<h1 id=\"skatteetatens-api\" style=\"position:relative;\"><a href=\"#skatteetatens-api\" aria-label=\"skatteetatens api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Skatteetatens-API</h1>\n<p>Skatteetaten har utviklet en testklient (i python) som viser hvordan koble seg på ID-porten og kalle skatteetatens-API:\n<a href=\"/skattemeldingen/5915fb336cfa379195e11ce501a29c6f/skattemelding-eksternt-api-test.zip\">skattemelding-eksternt-api-test.zip</a></p>\n<h2 id=\"autentisering\" style=\"position:relative;\"><a href=\"#autentisering\" aria-label=\"autentisering permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Autentisering</h2>\n<p>Når en skattepliktig skal benytte et sluttbrukersystem for å sende inn skattemeldingen og næringsopplysninger gjennom API må sluttbrukeren og/eller sluttbrukersystemet være autentisert og autorisert gjennom en påloggingsprosess.</p>\n<p>Ved kall til skattemelding-API ønsker skatteetaten å kjenne til identiteten til innsender. Identiteten til pålogget bruker, kombinert med informasjon fra Altinn autorisasjon vil avgjøre hvilken person/selskap en pålogget bruker kan hente skattemeldingen til eller sende inn skattemelding for.</p>\n<p>Autentisering skjer enten via ID-porten eller Maskinporten:</p>\n<ul>\n<li>Personlig innlogging vil skje via ID-porten. </li>\n<li>Systemer/maskiner som ønsker å opptre på vegne av en organisasjon kan autentisere seg via maskinporten. </li>\n</ul>\n<p><strong>Merk</strong> at dagens Altinn innlogging med brukernavn/passord vil ikke lenger kunne brukes.</p>\n<h3 id=\"id-porten\" style=\"position:relative;\"><a href=\"#id-porten\" aria-label=\"id porten permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ID-porten</h3>\n<p>Via ID-porten kan selve sluttbrukeren autentiseres og da via sitt personnummer. </p>\n<p><img src=\"/skattemeldingen/dace642aece45a49423577b2fb81550e/idporten.png\" alt=\"idporten.png\"></p>\n<h4 id=\"registrering-av-et-sluttbrukersystem-i-id-porten\" style=\"position:relative;\"><a href=\"#registrering-av-et-sluttbrukersystem-i-id-porten\" aria-label=\"registrering av et sluttbrukersystem i id porten permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Registrering av et sluttbrukersystem i ID-porten</h4>\n<p>Når et sluttbrukersystem initierer en påloggingsprosess mot ID-porten må SBS sende med en klient-ID. Denne klient-id-en er unik for SBS-typen og vil bli tildelt ved at programvareleverandøren av SBS på forhånd har gjennomført en registrering (onboarding) i en selvbetjeningsportal hos Digdir/Difi. Dette er beskrevet her: <a href=\"https://difi.github.io/felleslosninger/oidc_index.html\">https://difi.github.io/felleslosninger/oidc_index.html</a>. Lenken beskriver også standarden OIDC som ID-porten er basert på.</p>\n<p>I registreringen inngår følgende data:</p>\n<ul>\n<li>Klient-id. Denne er en GUID som tildeles fra Digdir/Difi.</li>\n<li>Klient-navn. Dette er navn på SBS-systemet. Denne settes av SBS-leverandøren og det er ingen videre krav til navnestandard eller om programvareversjon skal inngå i navnet.</li>\n<li>Klient-navn skal presenteres for brukeren under påloggingen.</li>\n<li>Hvilken offentlig API-tjeneste registreringen gjelder. Dette identifiseres ved navn på en autorisasjonstype som er definert i ID-porten. For skattemeldingen foreslår vi autorisasjonstypenavnet \"Skattemeldingen-API\". merk! Dette støttes ikke i dag, men vil komme senere.</li>\n<li>Registreringen må knyttes opp mot en juridisk ansvarlig aktør, dvs et norsk selskap identifisert ved et orgnr. </li>\n</ul>\n<h3 id=\"maskin-porten\" style=\"position:relative;\"><a href=\"#maskin-porten\" aria-label=\"maskin porten permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Maskin-porten</h3>\n<p>Maskinporten sørger for sikker autentisering og tilgangskontroll for datautveksling mellom virksomheter. Løsningen garanterer identiteten mellom virksomheter og gjør det mulig å binde sammen systemer.</p>\n<p>Et sluttbrukersystem som kjører på en sikker server kan integreres i Maskinporten og da være autentisert med sitt organisasjonsnummer. Det vil da være organisasjonen som autentiserer seg. Hvilken sluttbruker som utfører hvilken handling i deres system må organisasjonen selv holde kontroll på. En forutsetning for bruk av Maskinporten er derfor at organisasjonen har bygget et godt tilgangskontroll av sine sluttbrukere.</p>\n<p>En autentisering gjort via Maskinporten tilrettelegger for høyere grad av automatisering da det ikke krever en personlig kodebrikke eller liknende. Vi tror Maskinporten vil passe for store selskap og regnskapsførere som skal levere skattemeldingen for mange. </p>\n<p>Bruk av Maskinporten forutsetter at organisasjonen har et virksomhetssertifikat eller tilsvarende mekanisme. Figuren under skisserer hvordan samhandlingen fungerer:</p>\n<p><img src=\"/skattemeldingen/4971d74fc93c737b59daa5821ded19a7/maskinporten.png\" alt=\"maskinporten.png\"></p>\n<p>Les detaljer om maksinporten her: <a href=\"https://difi.github.io/felleslosninger/maskinporten_guide_apikonsument.html\">https://difi.github.io/felleslosninger/maskinporten_guide_apikonsument.html</a></p>\n<h2 id=\"autorisasjon\" style=\"position:relative;\"><a href=\"#autorisasjon\" aria-label=\"autorisasjon permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Autorisasjon</h2>\n<p>API-ene som tilbys vil sjekke at sluttbrukeren eller eier av sluttbrukersystemet har tilgang til å utføre operasjoner gjennom API-et. Slik tilgangskontroll/autorisering skjer via Altinns autorisasjonskomponent.</p>\n<p>Dette betyr at sluttbrukeren eller eier av sluttbrukersystemet må ha de nødvendige rollene i Altinn. Dette blir som i eksisterende løsninger.</p>\n<h2 id=\"ping-tjeneste\" style=\"position:relative;\"><a href=\"#ping-tjeneste\" aria-label=\"ping tjeneste permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ping tjeneste</h2>\n<p>API tilbyr en ping tjeneste som kan kalles for å teste at integrasjonen fungerer. </p>\n<p><strong>URL</strong> : <code class=\"language-text\">GET https://&lt;env&gt;/api/eksterntapi/formueinntekt/skattemelding/ping</code></p>\n<p><strong>Eksempel URL</strong> : <code class=\"language-text\">GET https://mp-test.sits.no/api/eksterntapi/formueinntekt/skattemelding/ping</code></p>\n<p><strong>Forespørsel</strong> : <code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse</code></p>\n<p><strong>Respons</strong> : </p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token property\">\"ping\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pong\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>For detaljer om ping-tjenesten og \"hent Skattemelding\" tjenestene, se filen hent.py  <a href=\"/skattemeldingen/5915fb336cfa379195e11ce501a29c6f/skattemelding-eksternt-api-test.zip\">skattemelding-eksternt-api-test.zip</a></p>\n<h2 id=\"hent-skattemelding\" style=\"position:relative;\"><a href=\"#hent-skattemelding\" aria-label=\"hent skattemelding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hent skattemelding</h2>\n<p>API som returnerer siste gjeldende skattemeldingen for skattepliktige for gitt inntektsår. Den siste gjeldende skattemeldingen kan enten være utkast eller fastsatt:</p>\n<ul>\n<li>Utkast er en preutfylt skattemelding Skatteetaten har laget for den skattepliktige basert på innrapporterte data og data fra skattemeldingen tidligere år.</li>\n<li>Fastsatt betyr at skattemeldingen er manuelt innlevert eller automatisk innlevert ved utløp av innleveringsfrist. Dette kan også inneholde et eller flere myndighetsfastsatte felter. </li>\n</ul>\n<p><strong>URL</strong> : <code class=\"language-text\">GET https://&lt;env&gt;/api/eksterntapi/formueinntekt/skattemelding/&lt;inntektsaar&gt;/&lt;identifikator&gt;/</code></p>\n<p><strong>Eksempel URL</strong> : <code class=\"language-text\">GET https://mp-test.sits.no/api/eksterntapi/formueinntekt/skattemelding/2020/974761076</code></p>\n<p><strong>Forespørsel</strong> : </p>\n<ul>\n<li><code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse</code></li>\n<li><code class=\"language-text\">&lt;inntektsår&gt;: Inntektsåret man spør om informasjon for, i formatet YYYY.</code></li>\n<li><code class=\"language-text\">&lt;identifikator&gt;: Fødselsnummer, D-nummer eller organisasjonsnummer til den skattepliktige som man spør om skattemeldingen for.</code></li>\n</ul>\n<p><strong>Respons</strong> : </p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hentSkattemeldingMvResponse</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>no:skatteetaten:fastsetting:formueinntekt:skattemelding:hentskattemeldingmv:response:v1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokumenter</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>skattemeldingdokument</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>id</span><span class=\"token punctuation\">></span></span>SKI:138:5829<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>id</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoding</span><span class=\"token punctuation\">></span></span>utf-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoding</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>content</span><span class=\"token punctuation\">></span></span>Base64-enkodet skattemelding.xml iht XSD<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>content</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>type</span><span class=\"token punctuation\">></span></span>skattemeldingUtkastPersonligSkattepliktig<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>type</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>skattemeldingdokument</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokumenter</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>hentSkattemeldingMvResponse</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2 id=\"hent-skattemelding-basert-på-type\" style=\"position:relative;\"><a href=\"#hent-skattemelding-basert-p%C3%A5-type\" aria-label=\"hent skattemelding basert på type permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hent Skattemelding (basert på type)</h2>\n<p>API som returnerer siste gjeldende skattemeldingen av gitt type for skattepliktige for gitt inntektsår. Følgende type skattemeldinger er støttet:</p>\n<ul>\n<li>Utkast er en preutfylt skattemelding Skatteetaten har laget for den skattepliktige basert på innrapporterte data og data fra skattemeldingen tidligere år.</li>\n<li>Fastsatt betyr at skattemeldingen er manuelt innlevert eller automatisk innlevert ved utløp av innleveringsfrist. Dette kan også inneholde et eller flere myndighetsfastsatte felter. </li>\n</ul>\n<p><strong>URL</strong> : <code class=\"language-text\">GET https://&lt;env&gt;/api/eksterntapi/formueinntekt/skattemelding/&lt;type&gt;/&lt;inntektsaar&gt;/&lt;identifikator&gt;/</code></p>\n<p><strong>Eksempel URL</strong> : <code class=\"language-text\">GET https://mp-test.sits.no/api/eksterntapi/formueinntekt/skattemelding/utkast/2020/974761076</code></p>\n<p><strong>Forespørsel</strong> : </p>\n<ul>\n<li><code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse</code></li>\n<li><code class=\"language-text\">&lt;inntektsår&gt;: Inntektsåret man spør om informasjon for, i formatet YYYY.</code></li>\n<li><code class=\"language-text\">&lt;identifikator&gt;: Fødselsnummer, D-nummer eller organisasjonsnummer til den skattepliktige som man spør om skattemeldingen for.</code></li>\n</ul>\n<p><strong>Respons</strong> : </p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hentSkattemeldingMvResponse</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>no:skatteetaten:fastsetting:formueinntekt:skattemelding:hentskattemeldingmv:response:v1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokumenter</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>skattemeldingdokument</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>id</span><span class=\"token punctuation\">></span></span>SKI:138:5829<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>id</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoding</span><span class=\"token punctuation\">></span></span>utf-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoding</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>content</span><span class=\"token punctuation\">></span></span>Base64-enkodet skattemelding.xml iht XSD<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>content</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>type</span><span class=\"token punctuation\">></span></span>skattemeldingUtkastPersonligSkattepliktig<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>type</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>skattemeldingdokument</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokumenter</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>hentSkattemeldingMvResponse</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2 id=\"valider-skattemelding\" style=\"position:relative;\"><a href=\"#valider-skattemelding\" aria-label=\"valider skattemelding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Valider skattemelding</h2>\n<p>Tjenesten validerer innholdet i en skattemelding og returnerer en respons med eventuelle feil, avvik og advarsler.  Tjenesten vil foreta følgende:</p>\n<ol>\n<li>Kontroll av meldingsformatet.</li>\n<li>Kontroll av innholdet og sammensetningen av elementene i skattemeldingen.</li>\n<li>Beregninger/kalkyler.</li>\n</ol>\n<p>Skatteetaten ønsker at valideringstjenesten blir kalt i forkant av innsending av skattemeldingen. Dette for å sikre at skattemeldingen er korrekt og vil mest sannsynligvis bli godkjent ved innsending.\nUansett versjon vil skatteetaten ikke lagre eller følge opp informasjonen som sendes inn i valideringstjenesten på noen måte. Skatteetaten anser at disse dataene eies av den skattepliktige og ikke av skatteetaten.</p>\n<p><strong>URL</strong> : <code class=\"language-text\">POST https://&lt;env&gt;/api/eksterntapi/formueinntekt/skattemelding/valider/&lt;inntektsaar&gt;/&lt;identifikator&gt;</code></p>\n<p><strong>Eksempel URL</strong> : <code class=\"language-text\">POST https://mp-test.sits.no/api/eksterntapi/formueinntekt/skattemelding/valider/2020/01028312345</code></p>\n<p><strong>Forespørsel</strong> : </p>\n<ul>\n<li><code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse</code></li>\n<li><code class=\"language-text\">&lt;inntektsår&gt;: Inntektsåret man spør om informasjon for, i formatet YYYY.</code></li>\n<li><code class=\"language-text\">&lt;identifikator&gt;: Fødselsnummer, D-nummer eller organisasjonsnummer til den skattepliktige</code></li>\n</ul>\n<p><strong>Body</strong> : </p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>valideringsrequest</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>no:skatteetaten:fastsetting:formueinntekt:skattemelding:valideringsrequest:v1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokumenter</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokument</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>type</span><span class=\"token punctuation\">></span></span>skattemeldingPersonligSkattepliktig<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>type</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoding</span><span class=\"token punctuation\">></span></span>utf-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoding</span><span class=\"token punctuation\">></span></span>              \n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>content</span><span class=\"token punctuation\">></span></span>Base64-enkodet skattemelding.xml iht xsd-en<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>content</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokument</span><span class=\"token punctuation\">></span></span>   \n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokumenter</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>valideringsrequest</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><strong>Respons</strong> : </p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>valideringsresponse</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>no:skatteetaten:fastsetting:formueinntekt:skattemelding:validering:response:v1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokumenter</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokument</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>type</span><span class=\"token punctuation\">></span></span>skattemeldingEtterBeregning<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>type</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoding</span><span class=\"token punctuation\">></span></span>utf-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoding</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>content</span><span class=\"token punctuation\">></span></span>Base64-enkodet xml<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>content</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokument</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokument</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>type</span><span class=\"token punctuation\">></span></span>naeringsopplysningerEtterBeregning<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>type</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoding</span><span class=\"token punctuation\">></span></span>utf-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoding</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>content</span><span class=\"token punctuation\">></span></span>Base64-enkodet xml<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>content</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokument</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokument</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>type</span><span class=\"token punctuation\">></span></span>beregnetSkatt<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>type</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoding</span><span class=\"token punctuation\">></span></span>utf-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoding</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>content</span><span class=\"token punctuation\">></span></span>Base64-enkodet xml<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>content</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokument</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dokument</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>type</span><span class=\"token punctuation\">></span></span>summertSkattegrunnlagForVisning<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>type</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoding</span><span class=\"token punctuation\">></span></span>utf-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoding</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>content</span><span class=\"token punctuation\">></span></span>Base64-enkodet xml<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>content</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokument</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dokumenter</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>avvikEtterBeregning</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>avvik</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>avvikstype</span><span class=\"token punctuation\">></span></span>manglerNaeringsopplysninger<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>avvikstype</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>forekomstidentifikator</span><span class=\"token punctuation\">></span></span>global<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>forekomstidentifikator</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beregnetVerdi</span><span class=\"token punctuation\">></span></span>0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beregnetVerdi</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>sti</span><span class=\"token punctuation\">></span></span>resultatregnskap/driftsinntekt/sumDriftsinntekt/beloep/beloepSomHeltall<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>sti</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>avvik</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>avvikEtterBeregning</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>valideringsresponse</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>For detaljer om valider-tjenesten, se filen valider.py <a href=\"/skattemeldingen/5915fb336cfa379195e11ce501a29c6f/skattemelding-eksternt-api-test.zip\">skattemelding-eksternt-api-test.zip</a></p>\n<h1 id=\"altinn3-api\" style=\"position:relative;\"><a href=\"#altinn3-api\" aria-label=\"altinn3 api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Altinn3-API</h1>\n<p>For applikasjonsbrukere, dvs. organisasjoner og personer som kaller Altinn gjennom et klient API (typisk skattepliktige som bruker et sluttbrukersystem) tilbyr Altinn API-er med følgende funksjonalitet:</p>\n<ul>\n<li>Opprette en instans - i vårt tilfelle vil en instans være en skattemelding for et gitt år.</li>\n<li>Laste opp data - Brukes til å laste opp skattedata til en instans i Altinn. Relevante filer å laste opp vil være metadata og selve skattemeldingen.</li>\n<li>Laste ned data - Brukes til å laste ned data som tidligere er blitt lastet opp.</li>\n<li>Hente og trigge prosesstilstandendring.</li>\n<li>Hente eventer skjedd på en instans.</li>\n</ul>\n<p>Les mer om Altinn API-ene på <a href=\"https://docs.altinn.studio/teknologi/altinnstudio/altinn-api/\">altinn sine sider</a>. Altinn har utviklet POSTMAN skript som viser hvordan deres APIer kan bli kalt. Postman skriptene <a href=\"https://github.com/Altinn/altinn-studio/blob/master/src/test/Postman/collections/App.postman_collection.json\">finnes her</a></p>\n<p>Skatteetaten har også laget POSTMAN-skript som gjør kallene beskrevet under, se: <a href=\"/skattemeldingen/19c48d3b08e8edc86b333e45b8e31ce3/Skattemelding%20-%20Innsending%20-%20Altinn3.postman_collection.json\">postman_collection.json</a></p>\n<p>Tjenestene listet under kalles for å sende inn skattemelding til Altinn. Under følger en nærmere beskrivelse av hvordan skatteetatens innsendingstjenste vil fungere. </p>\n<p><em>Merk at Base URL-en</em> til applikasjonen vår i Altinn er: <code class=\"language-text\">https://skd.apps.tt02.altinn.no/skd/sirius-skattemelding-v1/.</code>  </p>\n<h2 id=\"autentisering-1\" style=\"position:relative;\"><a href=\"#autentisering-1\" aria-label=\"autentisering 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Autentisering</h2>\n<p>Første trinn er å få generert et autentiseringstoken i Altinn. Autentisering skjer enten via maskinporten eller ID-porten. Les mer om det på <a href=\"https://docs.altinn.studio/teknologi/altinnstudio/altinn-api/authentication/\">altinn sine sider</a></p>\n<p>Tokenet fra maskinporten/ID-porten brukes til å veksle det inn i et Altinn JWT access token. Det er Altinn tokenet som brukes videre til å kalle Altinn-APIer beskervet under.</p>\n<h2 id=\"hent-partyid\" style=\"position:relative;\"><a href=\"#hent-partyid\" aria-label=\"hent partyid permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hent partyID</h2>\n<p>PartyID er et intern Id hos Altinn som brukes til å kalle de øvrige tjenestene.</p>\n<p><strong>URL</strong> : <code class=\"language-text\">GET https://&lt;env&gt;/api/v1/profile/user</code></p>\n<p><strong>Eksempel URL</strong> : <code class=\"language-text\">GET https://skd.apps.tt02.altinn.no/skd/sirius-skattemelding-v1/api/v1/profile/user</code></p>\n<p><strong>Forespørsel</strong> : </p>\n<ul>\n<li><code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse på format: https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}.</code></li>\n<li><code class=\"language-text\">En header kalt Authorization må inneholde Altinn token (ref. avsnittet autentisering).</code></li>\n</ul>\n<p><strong>Respons</strong> : PartyId</p>\n<h2 id=\"opprette-instans\" style=\"position:relative;\"><a href=\"#opprette-instans\" aria-label=\"opprette instans permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Opprette instans</h2>\n<p>Første trinn i innsendingsløpet er opprettelse av en instans av skattemeldingen. Dette gjøres ved å kalle:</p>\n<p><strong>URL</strong> : <code class=\"language-text\">POST https://&lt;env&gt;/instances</code></p>\n<p><strong>Eksempel URL</strong> : <code class=\"language-text\">https://skd.apps.tt02.altinn.no/skd/sirius-skattemelding-v1/instances/</code></p>\n<p><strong>Forespørsel</strong> : </p>\n<ul>\n<li><code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse på format: https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}.</code></li>\n<li><code class=\"language-text\">En header kalt Authorization må inneholde Altinn token (ref. avsnittet autentisering).</code></li>\n</ul>\n<p><strong>Body</strong> : </p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\">{\n    \"instanceOwner\": {\n        \"partyId\": \"50006841\"\n    },\n    \"appOwner\":{\n        \"labels\" : [ \"gr\", \"x2\" ]\n    },\n    \"appId\" : \"skd/sirius-skattemelding-v1\",\n    \"dueBefore\": \"2020-06-01T12:00:00Z\",\n    \"visibleAfter\": \"2019-05-20T00:00:00Z\",\n    \"title\": { \"nb\": \"Skattemelding\" }\n}</code></pre></div>\n<p><strong>Respons</strong> : Metadata om instansen som ble opprettet. En unik instanceId vil være med i responen og kan brukes seinere til å hente/oppdatere instansen.</p>\n<h2 id=\"laste-opp-metadata\" style=\"position:relative;\"><a href=\"#laste-opp-metadata\" aria-label=\"laste opp metadata permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Laste opp metadata</h2>\n<p>Neste trinn er å laste opp meta-data (informasjon om hvem innsender er, dato etc.) om skattemeldingen. Meta-data skal være en XML-fil iht. Skattemeldingsapp<em>v1.xsd (se også eksempelfilen: Skattemeldingsapp</em>v1.xml).</p>\n<p><strong>URL</strong> : <code class=\"language-text\">POST https://&lt;env&gt;/instances</code>\n<strong>Eksempel URL</strong> : <code class=\"language-text\">https://skd.apps.tt02.altinn.no/skd/sirius-skattemelding-v1/instances/50006841/55e65419-361f-4da5-9ad2-dce08ba6a0e1/data?dataType=Skattemeldingsapp_v1</code></p>\n<p><strong>Forespørsel</strong> : </p>\n<ul>\n<li><code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse på format: https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}.</code></li>\n<li><code class=\"language-text\">En header kalt Authorization må inneholde Altinn token (ref. avsnittet autentisering).</code></li>\n</ul>\n<h2 id=\"laste-opp-skattedata\" style=\"position:relative;\"><a href=\"#laste-opp-skattedata\" aria-label=\"laste opp skattedata permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Laste opp skattedata</h2>\n<p>Neste trinn er å laste opp vedlegg. </p>\n<p><strong>URL</strong> : <code class=\"language-text\">POST {appPath}/instances/{partyId}/{instanceId}/data?dataType={type}</code></p>\n<p><strong>Eksempel URL</strong> : <code class=\"language-text\">https://skd.apps.tt02.altinn.no/skd/sirius-skattemelding-v1/instances/50006841/ef796f7b-8168-4373-bcc6-cf6c42a8873e/data?dataType=skattemelding</code></p>\n<p><strong>Forespørsel</strong> : </p>\n<ul>\n<li><code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse på format: https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}.</code></li>\n<li><code class=\"language-text\">En header kalt Authorization må inneholde Altinn token (ref. avsnittet autentisering).</code></li>\n</ul>\n<p><strong>Body</strong> : <code class=\"language-text\">data-binary &#39;../skattemelding.xml&#39;. Filen skattemelding.xml skal være på samme format som responsen fra tjenesten &quot;Hent Skattemelding&quot;.</code></p>\n<p><strong>Respons</strong> : <code class=\"language-text\">Respons vil inneholde metadata om objektet som ble opprettet. En unik identifikator (id) vil bli retunert som seinere kan brukes til å oppdatere, sjekke status etc..</code></p>\n<h2 id=\"trigge-prosesstilstandsendring\" style=\"position:relative;\"><a href=\"#trigge-prosesstilstandsendring\" aria-label=\"trigge prosesstilstandsendring permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Trigge prosesstilstandsendring</h2>\n<p>For å endre prosesstilstanden kan følgende API kalles:</p>\n<p><strong>URL</strong> : <code class=\"language-text\">GET {appPath}/instances/{instanceOwnerId}/{instanceId}/prosess/start|next|completeProcess</code></p>\n<p><strong>Eksempel URL</strong> : <code class=\"language-text\">https://skd.apps.tt02.altinn.no/skd/sirius-skattemelding-v1/instances/50006841/ef796f7b-8168-4373-bcc6-cf6c42a8873e/process/completeProcess</code></p>\n<p><strong>Forespørsel</strong> : </p>\n<ul>\n<li><code class=\"language-text\">&lt;env&gt;: Miljøspesifikk adresse på format: https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}.</code></li>\n<li><code class=\"language-text\">En header kalt Authorization må inneholde Altinn token (ref. avsnittet autentisering).</code></li>\n</ul>","fields":{"slug":"/documentation/api/"}}},{"node":{"html":"<h1 id=\"kotlin\" style=\"position:relative;\"><a href=\"#kotlin\" aria-label=\"kotlin permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kotlin</h1>\n<p>Tekst</p>\n<h2 id=\"kode\" style=\"position:relative;\"><a href=\"#kode\" aria-label=\"kode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kode</h2>\n<p>Tekst</p>","fields":{"slug":"/documentation/kotlin/"}}},{"node":{"html":"<h1 id=\"testplan\" style=\"position:relative;\"><a href=\"#testplan\" aria-label=\"testplan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Testplan</h1>\n<p>Formålet med testen er å verifisere uthenting av skattemelding for en skattepliktig og bruk av valideringstjenesten hos Skatteetaten.\nI tillegg legger vi opp til muligheten til å instansiere opp en instans for skattemelding på den nye Altinn 3 plattformen.\nDet skal også være tilgjengelig funksjonalitet for å laste opp filer med skattemelding og næringsopplysninger på instansen i Altinn.</p>\n<h1 id=\"innhold-i-testen\" style=\"position:relative;\"><a href=\"#innhold-i-testen\" aria-label=\"innhold i testen permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Innhold i testen</h1>\n<p>Konkret må sluttbrukersystemet gjøre følgende:</p>\n<ol>\n<li>Få etablert et kundeforhold hos Digitaliseringsdirektoratet (DigDir) og ta i bruk ID-porten.</li>\n<li>Logge inn hos ID-porten for å få en sesjon (og token).</li>\n<li>\n<p>Utvikle en applikasjon/klient som:</p>\n<ul>\n<li>Sende en request til Skatteetatens tjeneste for å hente ut skattemeldingen for en skattepliktig.</li>\n<li>Sende en request til Skatteetatens tjeneste for å validere skattemelding med næringsinformasjon for en skattepliktig</li>\n<li>Motta og tolke resultatet fra valideringstjenesten.</li>\n<li>Når det ikke er feil i retur fra valideringstjenesten kan man gå til punkt E</li>\n<li>Kalle Altinn sin nye plattform for å instansiere opp App'en for innsending av skattemelding for næringsdrivende.</li>\n<li>Kalle Altinn for å laste opp skattemelding og næringsopplysninger på den instansierte App'en fra pkt e.</li>\n</ul>\n</li>\n</ol>\n<p>Skatteetaten har tilgjengeliggjort en test-applikasjon som viser hvordan trinnene beskrevet over kan utføres:\n<a href=\"/skattemeldingen/5915fb336cfa379195e11ce501a29c6f/skattemelding-eksternt-api-test.zip\">skattemelding-eksternt-api-test.zip</a></p>\n<h2 id=\"ta-i-bruk-id-porten\" style=\"position:relative;\"><a href=\"#ta-i-bruk-id-porten\" aria-label=\"ta i bruk id porten permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ta i bruk ID-porten</h2>\n<p>Det første som en konsument av skattemeldings-API må gjøre er å etablere et kundeforhold hos Digitaliseringsdirektoratet (DigDir). Detaljer rundt hvordan ta i bruk ID-porten er beskrevet her:  <a href=\"https://samarbeid.difi.no/felleslosninger/id-porten/ta-i-bruk-id-porten\">https://samarbeid.difi.no/felleslosninger/id-porten/ta-i-bruk-id-porten</a>. Denne prosessen er delvis manuell så det er lurt å starte prosessen tidlig slik at dere kan komme i gang med testingen. Ved bestilling må dere oppgi at dere ønsker tilgang til skattemeldings-API fra skatteetaten.</p>\n<p>Et kundeforhold hos DigDir gir tilgang til deres selvbetjeningsløsning som igjen gir tilgang til administrasjon av Kundens bruk av ID-porten. I selvbetjeningsløsning kan kunden genere et såkalt client_id og definere et callback-url:</p>\n<ul>\n<li>client_id: er unik automatisk generert identifikator for tjenesten.</li>\n<li>\n<p>callback-url: Uri-en som klienten får lov å gå til etter innlogging. Etter en vellykket innlogging i ID-porten vil denne url-en bli kalt.\nDersom det skulle ta for lang tid å få opprettet et kundeforhold hos DigDir kan sluttbrukersystemene i mellomtiden benytte Skatteetatens client<em>id. For denne testen har Skatteetaten opprettet følgende client</em>id som kan benyttes av sluttbrukersystemene:</p>\n<ul>\n<li><code class=\"language-text\">client_id: 38e634d9-5682-44ae-9b60-db636efe3156</code> </li>\n<li>Callback-URL til denne client_id er satt til <a href=\"http://localhost:12345/token\">http://localhost:12345/token</a> (Hvis det er konsumenter som ønsker andre callback-URL kan vi ordne det)</li>\n</ul>\n</li>\n</ul>\n<p><strong>Nyttige lenker:</strong></p>\n<ul>\n<li>Klienten bruker test-miljøet i DigDir, \"verifikasjon 2\": <a href=\"https://samarbeid.difi.no/node/232\">https://samarbeid.difi.no/node/232</a></li>\n<li>OIDC-integrasjonen er beskrevet her: <a href=\"https://difi.github.io/felleslosninger/oidc_index.html\">https://difi.github.io/felleslosninger/oidc_index.html</a> </li>\n<li>Hvordan lage en klient i selvregistreringen: <a href=\"https://minside-samarbeid.difi.no/organization-home/services/service-admin#/\">https://minside-samarbeid.difi.no/organization-home/services/service-admin#/</a></li>\n</ul>\n<h2 id=\"logge-inn-hos-id-porten\" style=\"position:relative;\"><a href=\"#logge-inn-hos-id-porten\" aria-label=\"logge inn hos id porten permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Logge inn hos ID-porten</h2>\n<p>Klienten må foreta følgende REST kall mot ID-porten:</p>\n<ul>\n<li>Starte system browser og gjøre autorisasjonskall mot ID-porten. Les mer om det her: <a href=\"https://difi.github.io/felleslosninger/oidc_protocol_authorize.html\">https://difi.github.io/felleslosninger/oidc_protocol_authorize.html</a></li>\n<li>Brukeren blir da sendt til ID-porten for innlogging. Dere kan benytte eksisterende test-brukere som dere benytter til test mot skattemeldingen i dag.</li>\n<li>Sette opp en webserver som venter på callback fra browseren. Etter vellykket pålogging i ID-porten sendes brukes til denne webserveren. Denne webserveren må være satt til å lytte på callback-URL <a href=\"http://localhost:12345/token\">http://localhost:12345/token</a> (ref. forrige kapittel).</li>\n<li>Gjøre et tokenforespørsel. Les mer om det her: <a href=\"https://difi.github.io/felleslosninger/oidc_protocol_token.html\">https://difi.github.io/felleslosninger/oidc_protocol_token.html</a></li>\n</ul>\n<p>Vi benytter følgende testmiljø hos ID-porten:</p>\n<ul>\n<li>/authorize endpoint: <a href=\"https://oidc-ver2.difi.no/idporten-oidc-provider/authorize\">https://oidc-ver2.difi.no/idporten-oidc-provider/authorize</a></li>\n<li>/token endpoint: <a href=\"https://oidc-ver2.difi.no/idporten-oidc-provider/token\">https://oidc-ver2.difi.no/idporten-oidc-provider/token</a></li>\n</ul>\n<p>For detaljer rundt hvilken HTTP parametere som må sendes med i kallet, se filen hent.py: <a href=\"/skattemeldingen/5915fb336cfa379195e11ce501a29c6f/skattemelding-eksternt-api-test.zip\">skattemelding-eksternt-api-test.zip</a></p>\n<h2 id=\"kalle-skattemeldings-api\" style=\"position:relative;\"><a href=\"#kalle-skattemeldings-api\" aria-label=\"kalle skattemeldings api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kalle skattemeldings-API</h2>\n<p>Når callback-URL blir kalt må klienten plukke ut JWT-tokenet fra responsen og legge det i header-feltet Authorization og kalle skattemeldings-API. For detaljer, se filen hent.py: <a href=\"/skattemeldingen/5915fb336cfa379195e11ce501a29c6f/skattemelding-eksternt-api-test.zip\">skattemelding-eksternt-api-test.zip</a></p>\n<p>URL til skattemeldings-API i test er: <a href=\"https://mp-test.sits.no/\">https://mp-test.sits.no/</a></p>\n<p>Første testen bør være å teste at klienten når frem, dette kan gjøres ved å kalle ping tjenesten:</p>\n<ul>\n<li><code class=\"language-text\">GET https://&lt;env&gt;/api/eksterntapi/formueinntekt/skattemelding/ping</code></li>\n<li><code class=\"language-text\">Eksempel: GET https://mp-test.sits.no/api/eksterntapi/formueinntekt/skattemelding/ping</code></li>\n</ul>\n<p>For nærmere beskrivelse av skattemelding-API og Altinn3-API, se kapitelet <a href=\"/skattemeldingen/07b42fb8c71a417691a2e9f32183ca2c/index.md\">API</a></p>\n<h1 id=\"se-skattemelding-i-portal\" style=\"position:relative;\"><a href=\"#se-skattemelding-i-portal\" aria-label=\"se skattemelding i portal permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Se skattemelding i portal</h1>\n<p>URL til portal: <a href=\"https://skatt-ref.sits.no/web/skattemeldingen/2020\">https://skatt-ref.sits.no/web/skattemeldingen/2020</a></p>\n<p>Bruk MinID innlogging; fnr på testbruker, password01 og Pinkode 12345.</p>\n<p>Merk at dere også kan endre/tilføye opplysninger og sende inn skattemelding. Fastsatt skattemelding (endret skattemelding) vil da også være tilgjengelig for nedlasting. Se kapittel 4.3.6.3 i implementasjonsguide.</p>\n<h1 id=\"tidsplan-henvendelser-og-tilbakemelding-på-testresultater\" style=\"position:relative;\"><a href=\"#tidsplan-henvendelser-og-tilbakemelding-p%C3%A5-testresultater\" aria-label=\"tidsplan henvendelser og tilbakemelding på testresultater permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tidsplan, henvendelser og tilbakemelding på testresultater</h1>\n<p>Tidsplan, henvendelser og tilbakemelding på testresultater\nTestmiljøet vil være tilgjengelig fra 10.6. Det er ikke bestemt sluttdato for gjennomføring, men vi ønsker at flest mulig får gjennomført testen så raskt det lar seg gjøre.</p>\n<p>Tekniske spørsmål knyttet til forberedelser og gjennomføring kan rettes til nyskattemelding@skatteetaten.no</p>\n<p>Etter gjennomført test ønsker vi at dere sender en testrapport på resultatet av gjennomført test. Den kan dere sende til samme adresse som over. I testrapporten beskriver dere hvordan dere har gjennomført test (om dere har brukt testklienten eller egenutviklet kode), resultatet og eventuelle kommentarer.</p>","fields":{"slug":"/documentation/test/"}}}]}},"pageContext":{}},"staticQueryHashes":["270254161"]}